import{d as x,r as w,o as i,c as l,a as u,w as D,v as I,b as m,t as _,e as $,F as v,i as y,f as S,g as V,u as A,h as g,n as E,_ as B}from"./index.4d637d55.js";import{u as L,p as F,c as M,r as h,d as b,a as N,L as R,b as j}from"./LoadingRound.db26aa00.js";let T=a=>crypto.getRandomValues(new Uint8Array(a)),U=(a,t,n)=>{let r=(2<<Math.log(a.length-1)/Math.LN2)-1,c=-~(1.6*r*t/a.length);return(p=t)=>{let s="";for(;;){let o=n(c),e=c;for(;e--;)if(s+=a[o[e]&r]||"",s.length===p)return s}}},q=(a,t=21)=>U(a,t,T);const H=["onSubmit"],K=u("button",{type:"submit",class:"p-1 px-5 text-xl rounded-xl text-white bg-indigo-800 h-12 hover:bg-indigo-700 active:bg-indigo-900"}," \u0421\u0433\u0435\u043D\u0435\u0440\u0438\u0440\u043E\u0432\u0430\u0442\u044C ",-1),z={key:0,class:"error text-xl bg-red-200 rounded-xl mt-4 py-2 px-5"},G=x({__name:"FormItem",setup(a){const t=L(),n=w(""),r=w(""),c=y("emitter"),p=async()=>{t.isLoading=!0;const o=F(M(h(b),"links")).key,e=s(o),d={},f={original_link:n.value,timestamp:Date.now(),short_link:document.location.origin+"/"+e,short_code:e,code:o};d["/links/"+o]=f,N(h(b),d).then(()=>{n.value="",t.setLinks(f),c.emit("sendData"),t.isLoading=!1}).catch(C=>{r.value="\u041E\u0448\u0438\u0431\u043A\u0430 \u043E\u0442\u043F\u0440\u0430\u0432\u043A\u0438 \u0434\u0430\u043D\u043D\u044B\u0445 "+C,t.isLoading=!1})},s=o=>q(o,5)();return(o,e)=>(i(),l(v,null,[u("form",{action:"#",class:"p-5 mx-auto w-full bg-white flex items-center gap-3 rounded-xl shadow border-2 bg-blue-400",onSubmit:m(p,["prevent"])},[D(u("input",{type:"text",class:"w-full text-xl text-gray-800 p-1 px-4 rounded-xl h-12",placeholder:"https://www.google.com/search?q=smile","onUpdate:modelValue":e[0]||(e[0]=d=>n.value=d)},null,512),[[I,n.value]]),K],40,H),r.value?(i(),l("div",z,_(r.value),1)):$("",!0)],64))}}),J={class:"list-links relative"},O={class:"m-0 mt-5 p-0 list-none flex flex-col gap-2"},P={class:"overflow-hidden whitespace-nowrap text-ellipsis h-6"},Q={class:"ml-auto"},W=["onClick"],X=["onClick"],Y=x({__name:"LinksItem",setup(a){const t=L(),n=S(()=>t.getLinks.reverse()),r=y("emitter"),c=s=>{navigator.clipboard.writeText(s==null?void 0:s.short_link),t.setLableCopy(s),setTimeout(()=>{t.setLableCopy()},5e3)},p=s=>{t.isLoading=!0,j(h(b,"links/"+s.code)).then(async()=>{t.deleteLink(s),await t.getLinks,t.isLoading=!1}).catch(o=>{alert("\u041E\u0448\u0438\u0431\u043A\u0430 "+o),t.isLoading=!1})};return r.on("sendData",async()=>{await t.getLinks}),(s,o)=>(i(),l("div",J,[u("ul",O,[(i(!0),l(v,null,V(A(n),e=>(i(),l("li",{key:e==null?void 0:e.short_code,class:"flex items-center justify-between gap-4 bg-blue-200 rounded-lg px-4 py-3"},[u("span",P,_(e==null?void 0:e.original_link),1),u("span",Q,_(e==null?void 0:e.short_link),1),u("button",{onClick:m(d=>c(e),["prevent"]),class:E(["copy w-24 px-3 py-1 text-white rounded-lg cursor-pointer select-none",{"bg-purple-700":(e==null?void 0:e.copied)===!0,"bg-blue-500 hover:bg-blue-400 active:bg-blue-600":!(e!=null&&e.copied)}])},_(e!=null&&e.copied?"Copied":"Copy"),11,W),u("button",{onClick:m(d=>p(e),["prevent"]),class:"text-lg px-2 py-0 text-white rounded-lg cursor-pointer bg-red-500 hover:bg-red-400 active:bg-red-600 select-none"}," \xD7 ",8,X)]))),128))]),g(R)]))}});const Z=B(Y,[["__scopeId","data-v-64d6afa2"]]),te=x({__name:"HomeView",setup(a){return(t,n)=>(i(),l(v,null,[g(G),g(Z)],64))}});export{te as default};
